<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>主页</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <!--[if lt IE 9]>
    <!--<script src='assets/javascripts/html5shiv.js' type='text/javascript'></script>-->
    <![endif]-->
    <link type="text/css" rel="stylesheet" media="all" href="../assets/css/bootstrap.css">

    <!-- / jquery -->
    <script type="text/javascript" src="../assets/js/jquery-1.8.0.min.js"></script>
    <!-- / flatty theme -->
    <script type="text/javascript" src="../assets/js/nav.js"></script>
    <!-- Reset Stylesheet -->
    <link rel="stylesheet" href="../assets/css/reset.css" type="text/css" media="screen" />

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="../assets/css/style_new.css" type="text/css" media="screen" />

    <!-- dialog Stylesheet -->
    <link href="../assets/css/dialog.css" rel="stylesheet" type="text/css"/>
    <!-- Invalid Stylesheet. This makes stuff look pretty. Remove it if you want the CSS completely valid -->
    <link rel="stylesheet" href="../assets/css/invalid.css" type="text/css" media="screen" />
    <script type="text/javascript" src="../assets/js/pccs.js"></script>
    <script type="text/javascript" src="../assets/js/esl/esl.js"></script>
    <!--时间插件-->
    <script type="text/javascript" src="../assets/js/laydate.js"></script>

    <!--[if lte IE 7]> -->
    <link rel="stylesheet" href="../assets/css/ie.css" type="text/css" media="screen" />
    <!-- / flatty theme -->
    <link type="text/css" rel="stylesheet" media="all" id="color-settings-body-color" href="../assets/css/light-theme.css">
    <style type="text/css">
        #wrapper #logo {
            margin: 20px 5px;
        }
        #wrapper #profile-links {
            padding: 0 15px 20px 15px;
            line-height: 1.5em;
            text-align: right;
        }
        #wrapper {
            background: #f0f0f0 url('../assets/images/sidebar_bg.gif') top left repeat-y;
            color: #888;
            font-size: 14px;
            height: 100%;
            left: 0;
            position: absolute;
            top: 0;
            width: 230px;
            border-right: 1px solid #dddddd;
        }
        #main-content {
            margin: 0 30px 0 260px;
            padding: 40px 0 0;
        }
        body {
            color: #555;
            font-family: Arial,Helvetica,sans-serif;
            font-size: 12px;
        }
        #wrapper a, a:hover, .btn-link, .btn-link:hover {
            color: #222222;
            text-shadow: none;
        }
        #footer a{
            color: #57a000;
            text-decoration: none;
        }

    </style>
    <!--old page css and js-->
    <script type="text/javascript" src="../assets/js/simpla.jquery.configuration.js"></script>
    <!--[if IE]><script type="text/javascript" src="../assets/js/jquery.bgiframe.js"></script><![endif]-->
    <!-- Internet Explorer .png-fix -->
    <!--[if IE 6]> -->
    <!--<script type="text/javascript" src="../assets/js/DD_belatedPNG_0.0.7a.js"></script>-->
    <script type="text/javascript">
//        DD_belatedPNG.fix('.png_bg, img, li');
    </script>
    <!--个人资料修改-Start-->
    <script type="text/javascript">
        //个人资料编辑框控制
        $(document).ready(function(){
            $("#cancel_editPerson").click(function(event) {
                $(".popBox[title=个人资料修改] input").val("");
                $(".model-bg[title=个人资料修改],.popBox[title=个人资料修改]").hide();
            });
            $(".clsBtn[title=个人资料修改]").click(function(event) {
                $(".model-bg[title=个人资料修改],.popBox[title=个人资料修改]").hide();
            });
        });
        //个人资料编辑交互方法控制
        $(document).ready(function(){
            /**
             * 点击修改个人资料
             */
            $(".mode2").click(function(){
                //获取原始数据
                var username = userInfo.username;
                var userType = userInfo.userType;
                var company = userInfo.company;
                var phone = userInfo.phone;
                //将数据预填入编辑框
                $("#editPerson_username").val(username);
                var displayUserType="";
                if(userType!=""||userType!=null){
                    switch(userType[0]){
                        case "0":
                            displayUserType="超级管理员";
                            break;
                        case "1":
                            displayUserType="铁塔公司";
                            switch (userType[1]){
                                case "0":
                                    displayUserType+="省级";
                                    break;
                                case "1":
                                    displayUserType+="市级"
                                    break;
                                case "2":
                                    displayUserType+="县区级";
                                    break;
                            }
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "2":
                            displayUserType="中国移动";
                            switch (userType[1]){
                                case "0":
                                    displayUserType+="省级";
                                    break;
                                case "1":
                                    displayUserType+="市级"
                                    break;
                                case "2":
                                    displayUserType+="县区级";
                                    break;
                            }
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "3":
                            displayUserType="中国联通";
                            switch (userType[1]){
                                case "0":
                                    displayUserType+="省级";
                                    break;
                                case "1":
                                    displayUserType+="市级"
                                    break;
                                case "2":
                                    displayUserType+="县区级";
                                    break;
                            }
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "4":
                            displayUserType="中国电信";
                            switch (userType[1]){
                                case "0":
                                    displayUserType+="省级";
                                    break;
                                case "1":
                                    displayUserType+="市级"
                                    break;
                                case "2":
                                    displayUserType+="县区级";
                                    break;
                            }
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "5":
                            displayUserType="施工公司";
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "6":
                            displayUserType="代维公司";
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "7":
                            displayUserType="厂商";
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                    }

                }
                if (displayUserType!=""){
                    $("#editPerson_userType").val(displayUserType);
                }
                $("#editPerson_company").val(company);
                $("#editPerson_phone").val(phone);
                $(".model-bg[title=个人资料修改],.popBox[title=个人资料修改]").show();
            });
            /**
             * 修改个人资料，提交
             */
            $("#submit_editPerson").click(function(){
                //获取公共字段
                var originalPhone = userInfo.phone;
                var originalPassword = localStorage.getItem("originalPassword");
                var operatorName=userInfo.username;
                var qsData="operatorName="+operatorName+"&accessToken="+accessToken+"&originalName="+operatorName;
                var updatePersonInfo = "";
                //获取编辑数据
//                var phone = $("#editPerson_phone").val();
                var password = $("#editPerson_originalPassword").val();
                var newPassword1 = $("#editPerson_newPassword1").val();
                var newPassword2 = $("#editPerson_newPassword2").val();
                if(password!=originalPassword){
                    alert("原始密码不正确，请重新输入！");
                    $("#editPerson_originalPassword").val("");
                    $("#editPerson_originalPassword").focus();
                    return;
                }else if(newPassword1==""||newPassword2==""){
                    $("#editPerson_newPassword1").focus();
                    alert("输入参数为空，请重新输入！");
                    return;
                }else if(newPassword1!=newPassword2){
                    alert("两次输入密码不一致，请重新输入！");
                    $("#editPerson_newPassword1").val("");
                    $("#editPerson_newPassword2").val("");
                    $("#editPerson_newPassword1").focus();
                    return;
                }else{
                    updatePersonInfo+="&password="+newPassword1;
                }
                if(updatePersonInfo==""){
                    alert("输入参数为空，请重新输入！");
                    $("#editPerson_newPassword1").focus();
                    return;
                }else{
                    qsData+=updatePersonInfo;
                }
                //发起请求
                $.ajax({
                    async: false,
                    url: "https://www.smartlock.top/v0/updateUser",
                    type: "POST",
                    contentType: "application/x-www-form-urlencoded",
                    data: qsData,
                    timeout: 8000,
                    beforeSend: function ()
                    {

                    },
                    success: function (result) {

                        //将返回数据转化为json格式数据
                        var infoJson =JSON.parse(result);
                        //判断查询是否成功
                        if (infoJson.error){
                            var errInfo = infoJson.error;
                            alert(errInfo.msg);
                            if(errInfo.code=="00000"){
                                window.location.href="login.html";
                            }
                        }else if (infoJson.success)
                        {
                            var sucInfo =  infoJson.success;
                            var msg = sucInfo.msg;
                            alert(msg);
                            $(".edit-panel[title=个人资料修改] input").val("");
                            $(".model-bg[title=个人资料修改],.edit-panel[title=个人资料修改]").hide();
                            if(sucInfo.code=="04000"){
                                window.location.href="login.html";
                            }
                        }else {
                            alert("未知错误，请联系管理员！")
                        }
                    },
                    error: function (result) {
                        console.log(result);
                        alert("无法连接到服务器！");
                    }
                });
            });
        });
    </script>
    <!--个人资料修改-End-->
    <script type="text/javascript">
        var userInfo=JSON.parse(localStorage.getItem("userInfo"));
        var regionInfo=JSON.parse(localStorage.getItem("regionInfo"));
        var permissions=JSON.parse(localStorage.getItem("permissions"));
        var accessToken=localStorage.getItem("accessToken");
        var tokenEndTime=localStorage.getItem("tokenEndTime");
        //检查是否有登录状态
        function  checkUserValidity(){
            if(userInfo==null||accessToken==null) //访问的信息不存在，则返回空
            {
                alert("你还没有登录!");
                window.location.href = "login.html";
            }
            else {

                if (new Date().getTime()> tokenEndTime * 1000 )
                {
                    alert("登录授权时间超出!");
                    window.location.href = "login.html";

                }
                else
                {
//						alert(tokenEndTime * 1000+" "+new Date().getTime()+"已经登录成功了！"+userInfo);
                    var userType=userInfo.userType;
                    switch(userType[2])
                    {
                        case "0": //超级管理员
                            break;

                        case "3":  //用户为工程师，用户不能登录前端页面
                            alert("工程师不能登录前端!");
                            window.location.href = "login.html";
                            break;

                        case "2": //审批员只显示作业管理
                            $("#jizhanguanli").css('display','none');
                            $("#dianziyaoshiguanli").css('display','none');
                            $("#yuangongguanli").css('display','none');
                            break;











                        case "1": //管理员分五种情况
                            switch(userType[0])
                            {
                                case "1": //铁塔公司的管理员可以管理所有公司的员工

                                    break;
                                case "2": //中国移动工不能查看铁塔公司管理界面、中国联通公司管理界面、中国电信公司管理界面
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面
                                    break;
                                case "3": //中国联通工不能查看铁塔公司管理界面、中国移动公司管理界面、中国电信公司管理界面
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面
                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面
                                    break;
                                case "4": //中国电信工不能查看铁塔公司管理界面、中国移动公司管理界面、中国联通公司管理界面
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面
                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国电信员工管理界面
                                    break;
                                case "5": //施工公司员工只能管理自己所属公司员工
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面

                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国联通员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面

                                    $("#dwgsyg").css('display','none');//隐藏代维公司员工管理界面
                                    $("#csyg").css('display','none');  //隐藏厂商员工管理界面
                                    $("#jizhanguanli").css('display','none'); //不能显示基站管理
                                    $("#dianziyaoshiguanli").css('display','none'); //不能显示电子钥匙管理
                                    break;
                                case "6": //代维公司员工只能管理自己所属公司员工
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面

                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国联通员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面

                                    $("#sggsyg").css('display','none');  //隐藏施工公司员工管理界面
                                    $("#csyg").css('display','none'); //隐藏厂商公司员工管理界面
                                    $("#jizhanguanli").css('display','none'); //不能显示基站管理
                                    $("#dianziyaoshiguanli").css('display','none'); //不能显示电子钥匙管理
                                    break;
                                case "7": //厂商公司员工只能管理自己所属公司员工
                                    $("#ttyg").css('display','none'); //隐藏铁塔公司员工管理界面

                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国联通员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面

                                    $("#sggsyg").css('display','none'); //隐藏施工公司员工管理界面
                                    $("#dwgsyg").css('display','none'); //隐藏代维公司员工管理界面
                                    $("#jizhanguanli").css('display','none'); //不能显示基站管理
                                    $("#dianziyaoshiguanli").css('display','none'); //不能显示电子钥匙管理
                                    break;
                            }


                            break;
                    }






                    showUserInformation(); //侧边栏显示当前用户公司 管理区域 职位 用户名
                    setup(); //初始化选择省市县框
                    getDefaultStatistic();
//						init(); //初始化选择省市县选择栏

                }
                //动态的显示登录人员名字
//					document.getElementById("username").innerHTML=userInfo.username;
                document.getElementById("username1").innerHTML="欢迎回来"+" "+userInfo.username;

            }
        }
        //退出登录状态
        function  logout(){
            if(window.confirm("确定要退出登录状态？")){
                localStorage.clear();//清理登陆状态信息
                window.location.href="login.html";
            }
        }
        //关闭侧边栏
        function closeMenu(){
            $("#closeMenu").click(function(){
                $("#sidebar").removeAttr("style");
                $("#sidebar").fadeOut();
            })
        }







        function getDefaultStatistic()
        {
            var fileLocation ='../assets/js/echarts';
            require.config(
                    {
                        paths:
                        {
                            echarts: fileLocation,
                            'echarts/chart/line': fileLocation,
                            'echarts/chart/bar': fileLocation,
                            'echarts/chart/pie': fileLocation
                        }
                    });

            // 作为入口
            require(
                    [
                        'echarts',
                        'echarts/chart/bar'
                    ],
                    displayChart0
            );
        }


        function displayChart0(ec)
        {
            //柱状图
            var barChart = ec.init(document.getElementById('lockStatistic_bar'));
            barChart.setOption(getBarChartOption0());
        }
        //获得Bar图的选项和数据
        function getBarChartOption0()
        {
            var qsData="operatorName="+userInfo.username+"&accessToken="+accessToken;
            var managementProvince=$("#province").val();
            var managementCity=$("#city").val();
            qsData=qsData+"&managementProvince=四川省";
            qsData=qsData+"&managementCity=成都市";
            qsData=qsData+"&lockNum=Yes";

//            alert(qsData);
            console.log(qsData);

            var lock_area=[];
            var lock_data=[];

            //发起请求
            $.ajax({
                async: false,
                url: "https://www.smartlock.top/v0/queryStation",
                type: "POST",
                contentType: "application/x-www-form-urlencoded",
                data: qsData,
                timeout: 8000,
                beforeSend: function ()
                {

                },
                success: function (result) {

                    //将返回数据转化为json格式数据
                    var infoJson =JSON.parse(result);

                    //判断查询是否成功
                    if (infoJson.error){
                        var errInfo = infoJson.error;
                        alert(errInfo.msg);
                        if(errInfo.code=="00000"){
                            window.location.href="login.html";
                        }
                    }else if (infoJson.success!=null)
                    {

//                        alert(infoJson.success)
                        var sucInfo =  infoJson.success;
                        if(sucInfo==0)
                        {
                            alert("该城市无门锁，或你输入省市不完整");
                        }
                        else
                        {
                            for(var i=0;i<sucInfo.length;i++)
                            {
                                lock_area[i]=sucInfo[i].managementArea;
                                lock_data[i]=sucInfo[i].num;

                            }
                        }


                    }else {
                        alert("未知错误，请联系管理员！")
                    }
                },
                error: function (result) {
                    console.log(result);
                    alert("无法连接到服务器！");
                }
            });

            var option =
            {
                tooltip :
                {
                    show: true,
                    trigger: 'item'
                },
                legend:
                {
                    data:['区域']
                },
                toolbox:
                {
                    show : true,
                    feature :
                    {
                        mark : true,
                        dataView : {readOnly: false},
                        magicType:['line', 'bar'],
                        restore : true,
                        saveAsImage : true
                    }
                },
                calculable : true,
                xAxis :
                        [
                            {
                                type : 'category',
                                data :  lock_area //['周一','周二','周三','周四','周五','周六','周日']
                            }
                        ],
                yAxis :
                        [
                            {
                                type : 'value',
                                splitArea : {show : true}
                            }
                        ],
                series :
                        [
                            {
                                name:'区域',
                                type:'bar',
                                barWidth: 10,
                                itemStyle:
                                {        // 系列级个性化样式，纵向渐变填充
                                    normal:
                                    {
                                        borderRadius: 3,
                                        borderColor:'tomato',
                                        color : '#FF6633',
                                        label :
                                        {
                                            show : true,
                                            textStyle :
                                            {
                                                fontSize : '13',
                                                fontFamily : '微软雅黑',
                                                fontWeight : 'bold'
                                            }

                                        }

                                    },
                                    emphasis:
                                    {
                                        borderColor:'tomato',
                                        color: '#FF6633',
                                        borderWidth: 10
                                    }
                                },
                                data:lock_data //[220, 232, 101, 234, 190, 330, 210]
                            }
//                            ,
//                            {
//                                name:'直接访问',
//                                type:'bar',
//                                barWidth: 15,
//                                stack: '总量',
//                                itemStyle:
//                                {                // 系列级个性化
//                                    normal:
//                                    {
//                                        borderRadius: 3,
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        borderWidth: 10
//                                    }
//
//                                },
//
//                                data:
//                                        [
//                                            320, 332, 336, 334,390,330, 320
//                                        ]
//                            },
//                            {
//
//                                name:'搜索引擎',
//                                type:'bar',
//                                barWidth: 15,                   // 系列级个性化，柱形宽度
//
//                                itemStyle:
//                                {
//                                    normal:
//                                    {                   // 系列级个性化，横向渐变填充
//                                        borderRadius: 3,
//                                        color : '#70DBFF',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70DBFF',
//                                        borderWidth: 10
//
//                                    }
//
//                                },
//                                data:[620, 732, 701,734, 890, 930, 820]
//                            }
                ]
            };

            return option;

        }






        function getLockStatistic()
        {
            var fileLocation ='../assets/js/echarts';
            require.config(
                    {
                        paths:
                        {
                            echarts: fileLocation,
                            'echarts/chart/line': fileLocation,
                            'echarts/chart/bar': fileLocation,
                            'echarts/chart/pie': fileLocation
                        }
                    });

            // 作为入口
            require(
                    [
                        'echarts',
                        'echarts/chart/bar'
                    ],
                    displayChart1
            );
        }




        function displayChart1(ec)
        {
            //柱状图
            var barChart = ec.init(document.getElementById('lockStatistic_bar'));
            barChart.setOption(getBarChartOption1());
        }

        //获得Bar图的选项和数据
        function getBarChartOption1()
        {
            var qsData="operatorName="+userInfo.username+"&accessToken="+accessToken;
            var managementProvince=$("#province").val();
            var managementCity=$("#city").val();
            qsData=qsData+"&managementProvince="+managementProvince+"省";
            qsData=qsData+"&managementCity="+managementCity+"市";
            qsData=qsData+"&lockNum=Yes";



            $("#statistic_city").html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+
                    "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+
                    "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+
                    managementProvince+"省"+managementCity+"市"+"门锁统计数据");

//            alert(qsData);
            console.log(qsData);

            var lock_area=[];
            var lock_data=[];

            //发起请求
            $.ajax({
                async: false,
                url: "https://www.smartlock.top/v0/queryStation",
                type: "POST",
                contentType: "application/x-www-form-urlencoded",
                data: qsData,
                timeout: 8000,
                beforeSend: function ()
                {

                },
                success: function (result) {

                    //将返回数据转化为json格式数据
                    var infoJson =JSON.parse(result);

                    //判断查询是否成功
                    if (infoJson.error){
                        var errInfo = infoJson.error;
                        alert(errInfo.msg);
                        if(errInfo.code=="00000"){
                            window.location.href="login.html";
                        }
                    }else if (infoJson.success!=null)
                    {

//                        alert(infoJson.success)
                        var sucInfo =  infoJson.success;
                        if(sucInfo==0)
                        {
                            alert("该城市无门锁，或你输入省市不完整");
                        }
                        else
                        {
                            for(var i=0;i<sucInfo.length;i++)
                            {
                                lock_area[i]=sucInfo[i].managementArea;
                                lock_data[i]=sucInfo[i].num;

                            }
                        }


                    }else {
                        alert("未知错误，请联系管理员！")
                    }
                },
                error: function (result) {
                    console.log(result);
                    alert("无法连接到服务器！");
                }
            });

            var option =
            {
                tooltip :
                {
                    show: true,
                    trigger: 'item'
                },
                legend:
                {
                    data:['区域']
                },
                toolbox:
                {
                    show : true,
                    feature :
                    {
                        mark : true,
                        dataView : {readOnly: false},
                        magicType:['line', 'bar'],
                        restore : true,
                        saveAsImage : true
                    }
                },
                calculable : true,
                xAxis :
                        [
                            {
                                type : 'category',
                                data :  lock_area //['周一','周二','周三','周四','周五','周六','周日']
                            }
                        ],
                yAxis :
                        [
                            {
                                type : 'value',
                                splitArea : {show : true}
                            }
                        ],
                series :
                        [
                            {
                                name:'区域',
                                type:'bar',
                                barWidth: 10,
                                itemStyle:
                                {        // 系列级个性化样式，纵向渐变填充
                                    normal:
                                    {
                                        borderRadius: 3,
                                        borderColor:'tomato',
                                        color : '#FF6633',
                                        label :
                                        {
                                            show : true,
                                            textStyle :
                                            {
                                                fontSize : '13',
                                                fontFamily : '微软雅黑',
                                                fontWeight : 'bold'
                                            }

                                        }

                                    },
                                    emphasis:
                                    {
                                        borderColor:'tomato',
                                        color: '#FF6633',
                                        borderWidth: 10
                                    }
                                },
                                data:lock_data //[220, 232, 101, 234, 190, 330, 210]
                            }
//                            ,
//                            {
//                                name:'直接访问',
//                                type:'bar',
//                                barWidth: 15,
//                                stack: '总量',
//                                itemStyle:
//                                {                // 系列级个性化
//                                    normal:
//                                    {
//                                        borderRadius: 3,
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        borderWidth: 10
//                                    }
//
//                                },
//
//                                data:
//                                        [
//                                            320, 332, 336, 334,390,330, 320
//                                        ]
//                            },
//                            {
//
//                                name:'搜索引擎',
//                                type:'bar',
//                                barWidth: 15,                   // 系列级个性化，柱形宽度
//
//                                itemStyle:
//                                {
//                                    normal:
//                                    {                   // 系列级个性化，横向渐变填充
//                                        borderRadius: 3,
//                                        color : '#70DBFF',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70DBFF',
//                                        borderWidth: 10
//
//                                    }
//
//                                },
//                                data:[620, 732, 701,734, 890, 930, 820]
//                            }
                ]
            };

            return option;

        }














































        function getTaskStatistic()
        {
            var fileLocation ='../assets/js/echarts';
            require.config(
                    {
                        paths:
                        {
                            echarts: fileLocation,
                            'echarts/chart/line': fileLocation,
                            'echarts/chart/bar': fileLocation,
                            'echarts/chart/pie': fileLocation
                        }
                    });

            // 作为入口
            require
            (
                    [
                        'echarts',
                        'echarts/chart/line'
                    ],
                    displayChart2
            );
        }

        function displayChart2(ec)
        {
            //柱状图
            var lineChart = ec.init(document.getElementById('taskStatistic_bar'));
            lineChart.setOption(getBarChartOption2());
        }




        //封装参数校验和转换
        function checkArgs(taskStartTime,taskEndTime){
            var qsDataActive="";
            if(taskStartTime!=""&&taskStartTime!=null){
                var starTimer = new Date(Date.parse(taskStartTime.replace(/-/g, "/")));
//                window.console.log("开始时间戳为："+starTimer.getTime());
                qsDataActive = "&taskStartTime="+starTimer.getTime().toString().substring(0,10)
            };
            if(taskEndTime!=""&&taskEndTime!=null){
                var endTimer = new Date(Date.parse(taskEndTime.replace(/-/g, "/")));
//                window.console.log("结束时间戳为："+endTimer.getTime());
                qsDataActive +="&taskEndTime="+endTimer.getTime().toString().substring(0,10)
            };

            return qsDataActive;
        }

        //获得Bar图的选项和数据
        function getBarChartOption2()
        {



            var qsData="operatorName="+userInfo.username+"&accessToken="+accessToken;
            var lockID=$("#taskStatistic_lockID").val();
            var queryStartTime=$("#taskStatistic_queryStartTime").val();
            var queryEndTime=$("#taskStatistic_queryEndTime").val();

            queryStartTime=queryStartTime.substring(0,10);
            queryEndTime=queryEndTime.substring(0,10);
            if(lockID!=null&&lockID!="")
            {
                qsData=qsData+"&lockID="+lockID;
            }

            qsData=qsData+"&queryStartTime="+queryStartTime;
            qsData=qsData+"&queryEndTime="+queryEndTime;

//            alert(qsData);
            console.log(qsData);

            var task_date=[];
            var task_data=[];

            //发起请求
            $.ajax({
                async: false,
                url: "https://www.smartlock.top/v0/taskAnalyse",
                type: "POST",
                contentType: "application/x-www-form-urlencoded",
                data: qsData,
                timeout: 8000,
                beforeSend: function ()
                {

                },
                success: function (result) {

                    //将返回数据转化为json格式数据
                    var infoJson =JSON.parse(result);

                    //判断查询是否成功
                    if (infoJson.error){
                        var errInfo = infoJson.error;
                        alert(errInfo.msg);
                        if(errInfo.code=="00000"){
                            window.location.href="login.html";
                        }
                    }else if (infoJson.success!=null)
                    {

//                        alert(infoJson.success)
                        var sucInfo =  infoJson.success;
                        if(sucInfo==0)
                        {
                            alert("该城市无门锁，或你输入省市不完整");
                        }
                        else
                        {
                            for(var i=0;i<sucInfo.length;i++)
                            {
                                task_date[i]=sucInfo[i].date;
                                task_data[i]=sucInfo[i].num;

                            }
                        }


                    }else {
                        alert("未知错误，请联系管理员！")
                    }
                },
                error: function (result) {
                    console.log(result);
                    alert("无法连接到服务器！");
                }
            });


            var option =
            {
                tooltip :
                {
                    show: true,
                    trigger: 'item'
                },
                legend:
                {
                    data:['工单数目']
                },
                toolbox:
                {
                    show : true,
                    feature :
                    {
                        mark : true,
                        dataView : {readOnly: false},
                        magicType:['line', 'bar'],
                        restore : true,
                        saveAsImage : true
                    }
                },
                calculable : true,
                xAxis :
                        [
                            {
                                type : 'category',
                                data : task_date //['周一','周二','周三','周四','周五','周六','周日']
                            }
                        ],
                yAxis :
                        [
                            {
                                type : 'value',
                                splitArea : {show : true}
                            }
                        ],
                series :
                        [
                            {
                                name:'工单数目',
                                type:'line',
                                barWidth: 10,
                                itemStyle:
                                {        // 系列级个性化样式，纵向渐变填充
                                    normal:
                                    {
                                        borderRadius: 3,
                                        borderColor:'tomato',
                                        color : '#FF6633',
                                        label :
                                        {
                                            show : true,
                                            textStyle :
                                            {
                                                fontSize : '13',
                                                fontFamily : '微软雅黑',
                                                fontWeight : 'bold'
                                            }

                                        }

                                    },
                                    emphasis:
                                    {
                                        borderColor:'tomato',
                                        color: '#FF6633',
                                        borderWidth: 10
                                    }
                                },
                                data: task_data //[220, 232, 101, 234, 190, 330, 210]
                            }
//                            ,
//                            {
//                                name:'直接访问',
//                                type:'line',
//                                barWidth: 15,
//                                stack: '总量',
//                                itemStyle:
//                                {                // 系列级个性化
//                                    normal:
//                                    {
//                                        borderRadius: 3,
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        borderWidth: 10
//                                    }
//
//                                },
//
//                                data:
//                                        [
//                                            320, 332, 336, 334,390,330, 320
//                                        ]
//                            },
//                            {
//
//                                name:'搜索引擎',
//                                type:'line',
//                                barWidth: 15,                   // 系列级个性化，柱形宽度
//
//                                itemStyle:
//                                {
//                                    normal:
//                                    {                   // 系列级个性化，横向渐变填充
//                                        borderRadius: 3,
//                                        color : '#70DBFF',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70DBFF',
//                                        borderWidth: 10
//
//                                    }
//
//                                },
//                                data:[620, 732, 701,734, 890, 930, 820]
//                            }
                ]
            };

            return option;

        }





















































































































        function getOpenStatistic()
        {
            var fileLocation ='../assets/js/echarts';
            require.config(
                    {
                        paths:
                        {
                            echarts: fileLocation,
                            'echarts/chart/line': fileLocation,
                            'echarts/chart/bar': fileLocation,
                            'echarts/chart/pie': fileLocation
                        }
                    });

            // 作为入口
            require
            (
                    [
                        'echarts',
                        'echarts/chart/line'
                    ],
                    displayChart3
            );
        }

        function displayChart3(ec)
        {
            //柱状图
            var lineChart = ec.init(document.getElementById('openStatistic_bar'));
            lineChart.setOption(getBarChartOption3());
        }

        //获得Bar图的选项和数据
        function getBarChartOption3()
        {
            var qsData="operatorName="+userInfo.username+"&accessToken="+accessToken;
            var lockID=$("#openStatistic_lockID").val();
            var queryStartTime=$("#openStatistic_queryStartTime").val();
            var queryEndTime=$("#openStatistic_queryEndTime").val();

            queryStartTime=queryStartTime.substring(0,10);
            queryEndTime=queryEndTime.substring(0,10);
            if(lockID!=null&&lockID!="")
            {
                qsData=qsData+"&lockID="+lockID;
            }


            qsData=qsData+"&queryStartTime="+queryStartTime;
            qsData=qsData+"&queryEndTime="+queryEndTime;
            qsData=qsData+"&taskType=open";

//            alert(qsData);
            console.log(qsData);

            var open_date=[];
            var open_data=[];

            //发起请求
            $.ajax({
                async: false,
                url: "https://www.smartlock.top/v0/taskCalculate",
                type: "POST",
                contentType: "application/x-www-form-urlencoded",
                data: qsData,
                timeout: 8000,
                beforeSend: function ()
                {

                },
                success: function (result) {

                    //将返回数据转化为json格式数据
                    var infoJson =JSON.parse(result);

                    //判断查询是否成功
                    if (infoJson.error){
                        var errInfo = infoJson.error;
                        alert(errInfo.msg);
                        if(errInfo.code=="00000"){
                            window.location.href="login.html";
                        }
                    }else if (infoJson.success!=null)
                    {

//                        alert(infoJson.success)
                        var sucInfo =  infoJson.success;
                        if(sucInfo==0)
                        {
                            alert("没有开门记录");
                        }
                        else
                        {
                            for(var i=0;i<sucInfo.length;i++)
                            {
                                open_date[i]=sucInfo[i].date;
                                open_data[i]=sucInfo[i].num;

                            }
                        }


                    }else {
                        alert("未知错误，请联系管理员！")
                    }
                },
                error: function (result) {
                    console.log(result);
                    alert("无法连接到服务器！");
                }
            });


            var option =
            {
                tooltip :
                {
                    show: true,
                    trigger: 'item'
                },
                legend:
                {
                    data:['门锁开门记录']
                },
                toolbox:
                {
                    show : true,
                    feature :
                    {
                        mark : true,
                        dataView : {readOnly: false},
                        magicType:['line', 'bar'],
                        restore : true,
                        saveAsImage : true
                    }
                },
                calculable : true,
                xAxis :
                        [
                            {
                                type : 'category',
                                data : open_date //['周一','周二','周三','周四','周五','周六','周日']
                            }
                        ],
                yAxis :
                        [
                            {
                                type : 'value',
                                splitArea : {show : true}
                            }
                        ],
                series :
                        [
                            {
                                name:'门锁开门记录',
                                type:'line',
                                barWidth: 10,
                                itemStyle:
                                {        // 系列级个性化样式，纵向渐变填充
                                    normal:
                                    {
                                        borderRadius: 3,
                                        borderColor:'tomato',
                                        color : '#FF6633',
                                        label :
                                        {
                                            show : true,
                                            textStyle :
                                            {
                                                fontSize : '13',
                                                fontFamily : '微软雅黑',
                                                fontWeight : 'bold'
                                            }

                                        }

                                    },
                                    emphasis:
                                    {
                                        borderColor:'tomato',
                                        color: '#FF6633',
                                        borderWidth: 10
                                    }
                                },
                                data:open_data //[220, 232, 101, 234, 190, 330, 210]
                            }
















//                            ,
//                            {
//                                name:'直接访问',
//                                type:'line',
//                                barWidth: 15,
//                                stack: '总量',
//                                itemStyle:
//                                {                // 系列级个性化
//                                    normal:
//                                    {
//                                        borderRadius: 3,
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        borderWidth: 10
//                                    }
//
//                                },
//
//                                data:
//                                        [
//                                            320, 332, 336, 334,390,330, 320
//                                        ]
//                            },
//                            {
//
//                                name:'搜索引擎',
//                                type:'line',
//                                barWidth: 15,                   // 系列级个性化，柱形宽度
//
//                                itemStyle:
//                                {
//                                    normal:
//                                    {                   // 系列级个性化，横向渐变填充
//                                        borderRadius: 3,
//                                        color : '#70DBFF',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70DBFF',
//                                        borderWidth: 10
//
//                                    }
//
//                                },
//                                data:[620, 732, 701,734, 890, 930, 820]
//                            }
                ]
            };

            return option;

        }

        function getCloseStatistic()
        {
            var fileLocation ='../assets/js/echarts';
            require.config(
                    {
                        paths:
                        {
                            echarts: fileLocation,
                            'echarts/chart/line': fileLocation,
                            'echarts/chart/bar': fileLocation,
                            'echarts/chart/pie': fileLocation
                        }
                    });

            // 作为入口
            require
            (
                    [
                        'echarts',
                        'echarts/chart/line'
                    ],
                    displayChart4
            );
        }


        function displayChart4(ec)
        {
            //柱状图
            var lineChart = ec.init(document.getElementById('closeStatistic_bar'));
            lineChart.setOption(getBarChartOption4());
        }


        //获得Bar图的选项和数据
        function getBarChartOption4()
        {








            var qsData="operatorName="+userInfo.username+"&accessToken="+accessToken;
            var lockID=$("#closeStatistic_lockID").val();
            var queryStartTime=$("#closeStatistic_queryStartTime").val();
            var queryEndTime=$("#closeStatistic_queryEndTime").val();

            queryStartTime=queryStartTime.substring(0,10);
            queryEndTime=queryEndTime.substring(0,10);
            if(lockID!=null&&lockID!="")
            {
                qsData=qsData+"&lockID="+lockID;
            }
            qsData=qsData+"&queryStartTime="+queryStartTime;
            qsData=qsData+"&queryEndTime="+queryEndTime;
            qsData=qsData+"&taskType=close";

//            alert(qsData);
            console.log(qsData);

            var close_date=[];
            var close_data=[];

            //发起请求
            $.ajax({
                async: false,
                url: "https://www.smartlock.top/v0/taskCalculate",
                type: "POST",
                contentType: "application/x-www-form-urlencoded",
                data: qsData,
                timeout: 8000,
                beforeSend: function ()
                {

                },
                success: function (result) {

                    //将返回数据转化为json格式数据
                    var infoJson =JSON.parse(result);

                    //判断查询是否成功
                    if (infoJson.error){
                        var errInfo = infoJson.error;
                        alert(errInfo.msg);
                        if(errInfo.code=="00000"){
                            window.location.href="login.html";
                        }
                    }else if (infoJson.success!=null)
                    {

//                        alert(infoJson.success)
                        var sucInfo =  infoJson.success;
                        if(sucInfo==0)
                        {
                            alert("没有关门记录");
                        }
                        else
                        {
                            for(var i=0;i<sucInfo.length;i++)
                            {
                                close_date[i]=sucInfo[i].date;
                                close_data[i]=sucInfo[i].num;

                            }
                        }


                    }else {
                        alert("未知错误，请联系管理员！")
                    }
                },
                error: function (result) {
                    console.log(result);
                    alert("无法连接到服务器！");
                }
            });











            var option =
            {
                tooltip :
                {
                    show: true,
                    trigger: 'item'
                },
                legend:
                {
                    data:['门锁关门次数']
                },
                toolbox:
                {
                    show : true,
                    feature :
                    {
                        mark : true,
                        dataView : {readOnly: false},
                        magicType:['line', 'bar'],
                        restore : true,
                        saveAsImage : true
                    }
                },
                calculable : true,
                xAxis :
                        [
                            {
                                type : 'category',
                                data : close_date //['周一','周二','周三','周四','周五','周六','周日']
                            }
                        ],
                yAxis :
                        [
                            {
                                type : 'value',
                                splitArea : {show : true}
                            }
                        ],
                series :
                        [
                            {
                                name:'门锁关门次数',
                                type:'line',
                                barWidth: 10,
                                itemStyle:
                                {        // 系列级个性化样式，纵向渐变填充
                                    normal:
                                    {
                                        borderRadius: 3,
                                        borderColor:'tomato',
                                        color : '#FF6633',
                                        label :
                                        {
                                            show : true,
                                            textStyle :
                                            {
                                                fontSize : '13',
                                                fontFamily : '微软雅黑',
                                                fontWeight : 'bold'
                                            }

                                        }

                                    },
                                    emphasis:
                                    {
                                        borderColor:'tomato',
                                        color: '#FF6633',
                                        borderWidth: 10
                                    }
                                },
                                data:close_data //[220, 232, 101, 234, 190, 330, 210]
                            }
//                            ,
//                            {
//                                name:'直接访问',
//                                type:'line',
//                                barWidth: 15,
//                                stack: '总量',
//                                itemStyle:
//                                {                // 系列级个性化
//                                    normal:
//                                    {
//                                        borderRadius: 3,
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70FF94',
//                                        borderWidth: 10
//                                    }
//
//                                },
//
//                                data:
//                                        [
//                                            320, 332, 336, 334,390,330, 320
//                                        ]
//                            },
//                            {
//
//                                name:'搜索引擎',
//                                type:'line',
//                                barWidth: 15,                   // 系列级个性化，柱形宽度
//
//                                itemStyle:
//                                {
//                                    normal:
//                                    {                   // 系列级个性化，横向渐变填充
//                                        borderRadius: 3,
//                                        color : '#70DBFF',
//                                        label :
//                                        {
//                                            show : true,
//                                            textStyle :
//                                            {
//                                                fontSize : '13',
//                                                fontFamily : '微软雅黑',
//                                                fontWeight : 'bold'
//                                            }
//
//                                        }
//
//                                    },
//                                    emphasis:
//                                    {
//                                        borderColor:'tomato',
//                                        color: '#70DBFF',
//                                        borderWidth: 10
//
//                                    }
//
//                                },
//                                data:[620, 732, 701,734, 890, 930, 820]
//                            }
                ]
            };

            return option;

        }

//        setInterval("myInterval()",10000);//1000为1秒钟，定时检查目前的token是否合法
//        function myInterval()
//        {
//            var query="operatorName="+userInfo.username+"&accessToken="+accessToken+"&username="+userInfo.username;
//            $.ajax({
//                async: false,
//                url: "https://www.smartlock.top/v0/queryUser",
//                type: "POST",
//                contentType: "application/x-www-form-urlencoded",
//                data: query,
//                timeout: 8000,
//                beforeSend: function ()
//                {
//
//                },
//                success: function (result) {
//                    //将返回数据转化为json格式数据
//                    var infoJson =JSON.parse(result);
//                    //判断查询是否成功
//                    if (infoJson.error){ //当前用户不存在或者当前用户token过期
//                        var errInfo = infoJson.error;
//                        alert(errInfo.msg);
//                        window.location.href="login.html";
//
//                        return;
//                    }else if (infoJson.success)
//                    {
////
////							console.log(accessToken)
//
//                    }else
//                    {
//                        alert("未知错误，请联系管理员！")
//                    }
//
//                },
//                error: function (result) {
////						console.log(result);
//                    alert("无法连接到服务器！");
//
//                }
//            });
//        }


        function showUserInformation() //侧边栏显示当前用户公司 管理区域 职位 用户名
        {
            var userType=userInfo.userType;

            switch(userType)
            {
                case "000":
                    document.getElementById("loginuser").innerHTML="<br>超级管理员<br>"+userInfo.username;
                    break;

                case "101":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司省级管理员<br>"+userInfo.username;
                    break;
                case "111":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司市级管理员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "121":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司区县管理员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;
                case "102":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司省级审批员<br>"+userInfo.username;
                    break;
                case "112":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司市级审批员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "122":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司区县审批员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;


                case "201":
                    document.getElementById("loginuser").innerHTML="<br>中国移动省级管理员<br>"+userInfo.username;
                    break;
                case "211":
                    document.getElementById("loginuser").innerHTML="<br>中国移动市级管理员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "221":
                    document.getElementById("loginuser").innerHTML="<br>中国移动区县管理员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;
                case "202":
                    document.getElementById("loginuser").innerHTML="<br>中国移动省级审批员<br>"+userInfo.username;
                    break;
                case "212":
                    document.getElementById("loginuser").innerHTML="<br>中国移动市级审批员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "222":
                    document.getElementById("loginuser").innerHTML="<br>中国移动区县审批员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;

                case "301":
                    document.getElementById("loginuser").innerHTML="<br>中国联通省级管理员<br>"+userInfo.username;
                    break;
                case "311":
                    document.getElementById("loginuser").innerHTML="<br>中国联通市级管理员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "321":
                    document.getElementById("loginuser").innerHTML="<br>中国联通区县管理员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;
                case "302":
                    document.getElementById("loginuser").innerHTML="<br>中国联通省级审批员<br>"+userInfo.username;
                    break;
                case "312":
                    document.getElementById("loginuser").innerHTML="<br>中国联通市级审批员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "322":
                    document.getElementById("loginuser").innerHTML="<br>中国联通区县审批员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;


                case "401":
                    document.getElementById("loginuser").innerHTML="<br>中国电信省级管理员<br>"+userInfo.username;
                    break;
                case "411":
                    document.getElementById("loginuser").innerHTML="<br>中国电信市级管理员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "421":
                    document.getElementById("loginuser").innerHTML="<br>中国电信区县管理员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;
                case "402":
                    document.getElementById("loginuser").innerHTML="<br>中国电信省级审批员<br>"+userInfo.username;
                    break;
                case "412":
                    document.getElementById("loginuser").innerHTML="<br>中国电信市级审批员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "422":
                    document.getElementById("loginuser").innerHTML="<br>中国电信区县审批员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;



                case "501":
                    document.getElementById("loginuser").innerHTML="<br>施工公司管理员<br>"+userInfo.username;
                    break;
                case "502":
                    document.getElementById("loginuser").innerHTML="<br>施工公司审批员<br>"+userInfo.username;
                    break;



                case "601":
                    document.getElementById("loginuser").innerHTML="<br>代维公司管理员<br>"+userInfo.username;
                    break;
                case "602":
                    document.getElementById("loginuser").innerHTML="<br>代维公司审批员<br>"+userInfo.username;
                    break;


                case "701":
                    document.getElementById("loginuser").innerHTML="<br>厂商管理员<br>"+userInfo.username;
                    break;
                case "702":
                    document.getElementById("loginuser").innerHTML="<br>厂商审批员<br>"+userInfo.username;
                    break;

            }

        }
    </script>
<body onload=checkUserValidity() >
<div style="height: inherit" id="body-wrapper">
    <div id="wrapper">
    <div id="main-nav-bg"></div>
    <!-- Logo (221px wide) -->
        <a href="#"><img id="logo" src="../assets/images/Logo_tower.png" alt="Simpla Admin logo" /></a>
        <!-- Sidebar Profile links -->
        <div id="profile-links">
            你好, <a href="#" title="Edit your profile" id="loginuser" class="loginuser" > </a><br />
            <br />
            <a href="#" class="mode2" title="View the Site">修改资料</a> | <a href="#" title="Sign Out" onclick="logout()">退出</a>
        </div>
        <nav id="main-nav" class="">
            <div class="navigation">
                <ul class="nav nav-stacked">
                    <li class="active">
                        <a href="main_new.html">
                            <i class="icon-home"></i>
                            <span>首页</span>
                        </a>
                    </li><!--首页-->
                    <li class="" id="jizhanguanli">
                        <a href="#" class="dropdown-collapse">
                            <i class="icon-rss"></i>
                            <span>基站管理</span>
                            <i class="icon-angle-down angle-down"></i>
                        </a>
                        <ul class="nav nav-stacked">
                            <li class="">
                                <a href="stationManage_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>基站列表</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="stationManageLog_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>基站日志管理</span>
                                </a>
                            </li>
                        </ul>
                    </li><!--基站管理-->
                    <li>
                        <a href="#" class="dropdown-collapse ">
                            <i class="icon-tasks"></i>
                            <span>作业管理</span>
                            <i class="icon-angle-down angle-down"></i>
                        </a>
                        <ul class="nav nav-stacked">
                            <li class="">
                                <a href="taskManage_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>工单列表</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="abnormalTaskManage_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>异常工单</span>
                                </a>
                            </li>
                        </ul>
                    </li><!--作业管理-->
                    <li id="dianziyaoshiguanli">
                        <a href="#" class="dropdown-collapse ">
                            <i class="icon-key"></i>
                            <span>电子钥匙管理</span>
                            <i class="icon-angle-down angle-down"></i>
                        </a>
                        <ul class="nav nav-stacked">
                            <li class="">
                                <a href="keyManage_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>钥匙列表</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="keyManageLog_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>钥匙日志</span>
                                </a>
                            </li>
                        </ul>
                    </li><!--电子钥匙管理-->
                    <li id="yuangongguanli">
                        <a href="#" class="dropdown-collapse ">
                            <i class="icon-group"></i>
                            <span>员工管理</span>
                            <i class="icon-angle-down angle-down"></i>
                        </a>
                        <ul class="nav nav-stacked">
                            <div id="ttyg" class="specialdiv"><li class="">
                                <a href="tower_manager_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>铁塔公司</span>
                                </a>
                            </li></div><!--铁塔公司-->
                            <div id="ydyg" class="specialdiv"><li class="">
                                <a href="mobile_manager_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>中国移动</span>
                                </a>
                            </li></div><!--中国移动-->
                            <div id="ltyg" class="specialdiv"><li class="">
                                <a href="unicom_manager_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>中国联通</span>
                                </a>
                            </li></div><!--中国联通-->
                            <div id="dxyg" class="specialdiv"><li class="">
                                <a href="telecom_manager_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>中国电信</span>
                                </a>
                            </li></div><!--中国电信-->
                            <div id="sggsyg" class="specialdiv"><li class="">
                                <a href="construction_manager_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>施工公司</span>
                                </a>
                            </li></div><!--施工公司-->
                            <div id="dwgsyg" class="specialdiv"> <li class="">
                                <a href="agent_manager_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>代维公司</span>
                                </a>
                            </li></div><!--代维公司-->
                            <div id="csyg" class="specialdiv"><li class="">
                                <a href="manufacturer_manager_new.html">
                                    <i class="icon-caret-right"></i>
                                    <span>厂商</span>
                                </a>
                            </li></div><!--厂商-->
                        </ul>
                    </li><!--员工管理-->
                    <!--<li class="" id="tongjiguanli">-->
                        <!--<a href="#">-->
                            <!--<i class="icon-dashboard"></i>-->
                            <!--<span>统计管理</span>-->
                        <!--</a>-->
                    <!--</li>&lt;!&ndash;统计管理&ndash;&gt;-->
                </ul>
            </div>
        </nav>

    </div><!--导航栏-->
        <div id="main-content"> <!-- Main Content Section with everything -->
            <!-- Page Head -->
            <h2 id="username1"> </h2>
            <!--<p id="page-intro"></p>-->
            <div class="clear"></div> <!-- End .clear -->
            <div class="content-box"><!-- Start Content Box -->
                <div class="content-box-header">
                    <!--<h3>公司简介</h3>-->
                    <ul class="content-box-tabs">
                        <!--<li><a href="#tab1" class="default-tab current">欢迎使用</a></li> &lt;!&ndash; href must be unique and match the id of target div &ndash;&gt;-->
                        <li><a href="#lockStatistic" class="default-tab">门锁个数统计</a></li> <!-- href must be unique and match the id of target div -->
                        <li><a href="#taskStatistic">门锁工单统计</a></li>
                        <li><a href="#openStatistic" >门锁开门次数统计</a></li>
                        <li><a href="#closeStatistic">门锁关闭次数统计</a></li>
                        <!--<li><a href="#tab2">表单</a></li>-->
                    </ul>
                    <div class="clear"></div>

                </div> <!-- End .content-box-header -->
                <!--弹出编辑框开始-->
                <div class="dialog">
                    <div class="model-bg" title="个人资料修改"></div>
                    <div class="popBox" title="个人资料修改">
                        <div class="ttBox">
                            <a class="clsBtn" title="个人资料修改"></a>
                            <span class="tt">修改个人信息</span>
                        </div>
                        <div class="txtBox">
                            <div class="item">
                                <label for="editPerson_username">用户名：</label>
                                <input type="text" id="editPerson_username" disabled="true">
                            </div>
                            <div class="item">
                                <label for="editPerson_userType">用户类型：</label>
                                <input type="text" id="editPerson_userType" disabled="true">
                            </div>
                            <div class="item">
                                <label for="editPerson_company">用户所属公司：</label>
                                <input type="text" id="editPerson_company" disabled="true">
                            </div>
                            <div class="item">
                                <label for="editPerson_phone">手机号码：</label>
                                <input type="text" id="editPerson_phone" disabled="true">
                            </div>
                            <div class="item">
                                <label for="editPerson_originalPassword">原始密码：</label>
                                <input type="password" id="editPerson_originalPassword">
                            </div>
                            <div class="item">
                                <label for="editPerson_newPassword1">新密码：</label>
                                <input type="password" id="editPerson_newPassword1">
                            </div>
                            <div class="item">
                                <label for="editPerson_newPassword2">确认新密码：</label>
                                <input type="password" id="editPerson_newPassword2">
                            </div>
                        </div>
                        <div class="btnArea">
                            <div class="btnGroup">
                                <a class="sgBtn ok" id="submit_editPerson">确定</a>
                                <a class="sgBtn cancel" id="cancel_editPerson">取消</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!--弹出编辑框结束-->
                <div class="content-box-content">

                    <!--<div class="tab-content default-tab" id="tab1"> &lt;!&ndash; This is the target div. id must match the href of this div's tab &ndash;&gt;-->
                        <!--<table style="width: auto; height: 490px">-->
                            <!--<tr>-->
                                <!--<td>-->
                                    <!--<p>公司简介巴拉巴拉</p>-->
                                <!--</td>-->
                            <!--</tr>-->
                            <!--&lt;!&ndash;<input type="button" id="closeMenu" value="关闭目录" onclick="closeMenu() "/>&ndash;&gt;-->

                        <!--</table>-->

                    <!--</div> &lt;!&ndash; End #tab1 &ndash;&gt;-->

                    <div class="tab-content default-tab" id="lockStatistic"> 	<!-- This is the target div. id must match the href of this div's tab -->
                        <form action="" method="post">
                            <fieldset id="lockStatisticFieldSet" > <!-- Set class to "column-left" or "column-right" on fieldsets to divide the form into columns -->
                                <p>
                                    <strong> <font color="red">*</font> 所属地区： </strong>
                                    <select name="province" id="province"></select>
                                    <select name="city" id="city"></select>
                                    <select name="county" id="county" style="display:none;"></select>
                                    <input class="button" type="button" onclick="getLockStatistic()" value="获取统计数据" />
                                </p>








                                <p>
                                    <h3 id="statistic_city">
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        四川省成都市门锁统计数据
                                    </h3>
                                </p>
                            </fieldset>


                            <div id="lockStatistic_bar" style="width:800px;height:600px;">  </div>

                            <div class="clear"></div><!-- End .clear -->

                        </form>


                    </div> <!-- End #stationList -->
                    <div class="tab-content" id="taskStatistic">
                        <form action="" method="post">
                            <fieldset id="taskStatisticFieldSet" > <!-- Set class to "column-left" or "column-right" on fieldsets to divide the form into columns -->
                                <p>
                                    <strong><font color="red">*</font> 门锁编号可以为空，为空返回当天所有门锁对应工单之和</strong>
                                </p>
                                <p>
                                    <strong> 门锁编号：</strong>
                                    <input class="text-input small-input" type="text" id="taskStatistic_lockID" name="taskStatistic_lockID" />
                                </p>

                                <p>
                                    <strong><font color="red">*</font>开始时间</strong>&nbsp;&nbsp;&nbsp;&nbsp;<input id="taskStatistic_queryStartTime" type="text" placeholder="请输入开始日期"  class="laydate-icon" onClick="laydate({istime: true, format: 'YYYY-MM-DD'})"/>
                                    <strong><font color="red">*</font>结束时间</strong>&nbsp;&nbsp;&nbsp;<input id="taskStatistic_queryEndTime" type="text"  placeholder="请输入结束日期" class="laydate-icon" onClick="laydate({istime: true, format: 'YYYY-MM-DD'})"  />
                                </p>
                                <p>
                                    <input class="button" type="button" onclick="getTaskStatistic()" value="获取统计数据" />
                                </p>

                            </fieldset>

                            <div id="taskStatistic_bar" style="width:800px;height:600px;">  </div>

                            <div class="clear"></div><!-- End .clear -->

                        </form>



                    </div> <!-- End #stationLog -->


                    <div class="tab-content" id="openStatistic">












                        <form action="" method="post">
                            <fieldset id="openStatisticFieldSet" > <!-- Set class to "column-left" or "column-right" on fieldsets to divide the form into columns -->
                                <p>
                                    <strong><font color="red">*</font> 门锁编号可以为空，为空返回当天所有门锁对应开门次数之和</strong>

                                </p>
                                <p>
                                    <strong> 门锁编号：</strong>
                                    <input class="text-input small-input" type="text" id="openStatistic_lockID" name="openStatistic_lockID" />
                                </p>

                                <p>
                                    <strong><font color="red">*</font>开始时间</strong>&nbsp;&nbsp;&nbsp;&nbsp;<input id="openStatistic_queryStartTime" type="text" placeholder="请输入开始日期"  class="laydate-icon" onClick="laydate({istime: true, format: 'YYYY-MM-DD'})"/>
                                    <strong><font color="red">*</font>结束时间</strong>&nbsp;&nbsp;&nbsp;<input id="openStatistic_queryEndTime" type="text"  placeholder="请输入结束日期" class="laydate-icon" onClick="laydate({istime: true, format: 'YYYY-MM-DD'})"  />
                                </p>
                                <p>
                                    <input class="button" type="button" onclick="getOpenStatistic()" value="获取统计数据" />
                                </p>







                            </fieldset>

                            <div id="openStatistic_bar" style="width:800px;height:600px;">  </div>

                            <div class="clear"></div><!-- End .clear -->

                        </form>


                    </div> <!-- End #stationLog -->

                    <div class="tab-content" id="closeStatistic">
                        <form action="" method="post">
                            <fieldset id="closeStatisticFieldSet" > <!-- Set class to "column-left" or "column-right" on fieldsets to divide the form into columns -->
                                <p>
                                    <strong><font color="red">*</font> 门锁编号可以为空，为空返回当天所有门锁对应关门次数之和</strong>
                                </p>
                                <p>
                                    <strong> 门锁编号：</strong>
                                    <input class="text-input small-input" type="text" id="closeStatistic_lockID" name="closeStatistic_lockID" />
                                </p>

                                <p>
                                    <strong><font color="red">*</font>开始时间</strong>&nbsp;&nbsp;&nbsp;&nbsp;<input id="closeStatistic_queryStartTime" type="text" placeholder="请输入开始日期"  class="laydate-icon" onClick="laydate({istime: true, format: 'YYYY-MM-DD'})"/>
                                    <strong><font color="red">*</font>结束时间</strong>&nbsp;&nbsp;&nbsp;<input id="closeStatistic_queryEndTime" type="text"  placeholder="请输入结束日期" class="laydate-icon" onClick="laydate({istime: true, format: 'YYYY-MM-DD'})"  />
                                </p>
                                <p>
                                    <input class="button" type="button" onclick="getCloseStatistic()" value="获取统计数据" />
                                </p>

                            </fieldset>

                            <div id="closeStatistic_bar" style="width:800px;height:600px;">  </div>

                            <div class="clear"></div><!-- End .clear -->

                        </form>





                    </div> <!-- End #stationLog -->


                </div> <!-- End .content-box-content -->

            </div> <!-- End .content-box -->
            <div class="clear"></div>
            <!-- Start Notifications -->
            <!-- End Notifications -->
            <div id="footer">
                <!-- Remove this notice or replace it with whatever you want -->
                &#169; Copyright 2016 中国铁塔股份有限公司 | Powered by UESTC CSIS</a> | <a href="#top">Top</a>

            </div><!-- End #footer -->

        </div> <!-- End #main-content -->
</div>
</body>
</html>