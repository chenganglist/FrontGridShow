<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>智能锁管理平台</title>
    <style type="text/css">
        .screen-top{
            padding:8px 0;
            background-color:#f6f6f6;
        }
        .screen-top span{
            width: 100px !important;
            text-align: center !important;
            font-size:16px;
            padding-left:15px;
            margin-bottom: 3px;
        }
        .screen-top span input{
            margin-left: 20px;
            padding: 6px;
            font-size: 13px;
            background: #fff url('../assets/images/bg-form-field.gif') top left repeat-x;
            border: 1px solid #d5d5d5;
            color: #333;
            width: 15% !important;
        }
    </style>
    <!--CSS-->
    <script type="text/javascript" src="../assets/js/jquery-1.8.0.min.js"></script>
    <!-- Reset Stylesheet -->
    <link rel="stylesheet" href="../assets/css/reset.css" type="text/css" media="screen" />
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="../assets/css/style.css" type="text/css" media="screen" />
    <!-- dialog Stylesheet -->
    <link href="../assets/css/dialog.css" rel="stylesheet" type="text/css"/>
    <!-- Invalid Stylesheet. This makes stuff look pretty. Remove it if you want the CSS completely valid -->
    <link rel="stylesheet" href="../assets/css/invalid.css" type="text/css" media="screen" />

    <!-- Colour Schemes  -->
    <!--Default colour scheme is green. Uncomment prefered stylesheet to use it.-->
    <!--<link rel="stylesheet" href="../assets/css/blue.css" type="text/css" media="screen" />-->
    <!--<link rel="stylesheet" href="../assets/css/red.css" type="text/ css" media="screen" />-->
    <!-- Internet Explorer Fixes Stylesheet -->
    <!--[if lte IE 7]>
    <link rel="stylesheet" href="../assets/css/ie.css" type="text/css" media="screen" />
    <![endif]-->
    <!--Javascripts-->
    <!--JqueryDateTable-->
    <link rel="stylesheet" href="../assets/css/jquery.dataTables.min.css"/>
    <script type="text/javascript" src="../assets/js/jquery.dataTables.min.js"></script>
    <!--<script type="text/javascript" src="../assets/js/dataTables.editor.min.js"></script>-->
    <!-- jQuery -->
    <!--时间插件-->
    <script type="text/javascript" src="../assets/js/laydate.js"></script>
    <!-- jQuery Configuration -->
    <script type="text/javascript" src="../assets/js/simpla.jquery.configuration.js"></script>
    <!-- jQuery Datepicker Plugin -->
    <script type="text/javascript" src="../assets/js/citySelect.js"></script>
    <!--<script type="text/javascript" src="../assets/js/common.js"></script>-->
    <!--[if IE]><script type="text/javascript" src="../assets/js/jquery.bgiframe.js"></script><![endif]-->
    <!-- Internet Explorer .png-fix -->
    <!--[if IE 6]>
    <script type="text/javascript" src="../assets/js/DD_belatedPNG_0.0.7a.js"></script>
    <script type="text/javascript">
        DD_belatedPNG.fix('.png_bg, img, li');
    </script>
    <![endif]-->
    <!--个人资料修改-Start-->
    <script type="text/javascript">
        //个人资料编辑框控制
        $(document).ready(function(){
            $("#cancel_editPerson").click(function(event) {
                $(".popBox[title=editPersonInfo] input").val("");
                $(".model-bg[title=editPersonInfo],.popBox[title=editPersonInfo]").hide();
            });
            $(".clsBtn[title=editPersonInfo]").click(function(event) {
                $(".model-bg[title=editPersonInfo],.popBox[title=editPersonInfo]").hide();
            });
        });
        //个人资料编辑交互方法控制
        $(document).ready(function(){
            /**
             * 点击修改个人资料
             */
            $(".mode2").click(function(){
                //获取原始数据
                var username = userInfo.username;
                var userType = userInfo.userType;
                var company = userInfo.company;
                var phone = userInfo.phone;
                //将数据预填入编辑框
                $("#editPerson_username").val(username);
                var displayUserType="";
                if(userType!=""||userType!=null){
                    switch(userType[0]){
                        case "0":
                            displayUserType="超级管理员";
                            break;

                        case "1":
                            displayUserType="铁塔公司";
                            switch (userType[1]){
                                case "0":
                                    displayUserType+="省级";
                                    break;
                                case "1":
                                    displayUserType+="市级"
                                    break;
                                case "2":
                                    displayUserType+="县区级";
                                    break;
                            }
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "2":
                            displayUserType="中国移动";
                            switch (userType[1]){
                                case "0":
                                    displayUserType+="省级";
                                    break;
                                case "1":
                                    displayUserType+="市级"
                                    break;
                                case "2":
                                    displayUserType+="县区级";
                                    break;
                            }
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "3":
                            displayUserType="中国联通";
                            switch (userType[1]){
                                case "0":
                                    displayUserType+="省级";
                                    break;
                                case "1":
                                    displayUserType+="市级"
                                    break;
                                case "2":
                                    displayUserType+="县区级";
                                    break;
                            }
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "4":
                            displayUserType="中国电信";
                            switch (userType[1]){
                                case "0":
                                    displayUserType+="省级";
                                    break;
                                case "1":
                                    displayUserType+="市级"
                                    break;
                                case "2":
                                    displayUserType+="县区级";
                                    break;
                            }
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "5":
                            displayUserType="施工公司";
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "6":
                            displayUserType="代维公司";
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                        case "7":
                            displayUserType="厂商";
                            switch (userType[2]){
                                case "1":
                                    displayUserType+="管理员";
                                    break;
                                case "2":
                                    displayUserType+="审批员";
                                    break;
                                case "3":
                                    displayUserType+="工程师";
                                    break;
                            }
                            break;
                    }

                }
                if (displayUserType!=""){
                    $("#editPerson_userType").val(displayUserType);
                }
                $("#editPerson_company").val(company);
                $("#editPerson_phone").val(phone);
                $(".model-bg[title=editPersonInfo],.popBox[title=editPersonInfo]").show();
            });
            /**
             * 修改个人资料，提交
             */
            $("#submit_editPerson").click(function(){
                //获取公共字段
                var originalPhone = userInfo.phone;
                var originalPassword = localStorage.getItem("originalPassword");
                var operatorName=userInfo.username;
                var qsData="operatorName="+operatorName+"&accessToken="+accessToken+"&originalName="+operatorName;
                var updatePersonInfo = "";
                //获取编辑数据
//                var phone = $("#editPerson_phone").val();
                var password = $("#editPerson_originalPassword").val();
                var newPassword1 = $("#editPerson_newPassword1").val();
                var newPassword2 = $("#editPerson_newPassword2").val();
                if(password!=originalPassword){
                    alert("原始密码不正确，请重新输入！");
                    $("#editPerson_originalPassword").val("");
                    $("#editPerson_originalPassword").focus();
                    return;
                }else if(newPassword1==""||newPassword2==""){
                    $("#editPerson_newPassword1").focus();
                    alert("输入参数为空，请重新输入！");
                    return;
                }else if(newPassword1!=newPassword2){
                    alert("两次输入密码不一致，请重新输入！");
                    $("#editPerson_newPassword1").val("");
                    $("#editPerson_newPassword2").val("");
                    $("#editPerson_newPassword1").focus();
                    return;
                }else{
                    updatePersonInfo+="&password="+newPassword1;
                }
                if(updatePersonInfo==""){
                    alert("输入参数为空，请重新输入！");
                    $("#editPerson_newPassword1").focus();
                    return;
                }else{
                    qsData+=updatePersonInfo;
                }
                //发起请求
                $.ajax({
                    async: false,
                    url: "https://www.smartlock.top/v0/updateUser",
                    type: "POST",
                    contentType: "application/x-www-form-urlencoded",
                    data: qsData,
                    timeout: 8000,
                    beforeSend: function ()
                    {

                    },
                    success: function (result) {

                        //将返回数据转化为json格式数据
                        var infoJson =JSON.parse(result);
                        //判断查询是否成功
                        if (infoJson.error){
                            var errInfo = infoJson.error;
                            alert(errInfo.msg);
                            if(errInfo.code=="00000"){
                                window.location.href="login.html";
                            }
                        }else if (infoJson.success)
                        {
                            var sucInfo =  infoJson.success;
                            var msg = sucInfo.msg;
                            alert(msg);
                            $(".edit-panel[title=editPersonInfo] input").val("");
                            $(".model-bg[title=editPersonInfo],.edit-panel[title=editPersonInfo]").hide();
                            if(sucInfo.code=="04000"){
                                window.location.href="login.html";
                            }
                        }else {
                            alert("未知错误，请联系管理员！")
                        }
                    },
                    error: function (result) {
                        console.log(result);
                        alert("无法连接到服务器！");
                    }
                });
            });
        });
    </script>
    <!--个人资料修改-End-->
    <script type="text/javascript">
        //全局定义变量
        var table;
        var userInfo=JSON.parse(localStorage.getItem("userInfo"));
        var tokenEndTime=localStorage.getItem("tokenEndTime");
        //设置时间格式
        Date.prototype.format = function(format) {
            var date = {
                "M+": this.getMonth() + 1,
                "d+": this.getDate(),
                "h+": this.getHours(),
                "m+": this.getMinutes(),
                "s+": this.getSeconds(),
                "q+": Math.floor((this.getMonth() + 3) / 3),
                "S+": this.getMilliseconds()
            };
            if (/(y+)/i.test(format)) {
                format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));
            }
            for (var k in date) {
                if (new RegExp("(" + k + ")").test(format)) {
                    format = format.replace(RegExp.$1, RegExp.$1.length == 1
                            ? date[k] : ("00" + date[k]).substr(("" + date[k]).length));
                }
            }
            return format;
        };
        /**
         * datables初始化
         */
        $(document).ready(function() {
            //初始化展示框
            table = $('#keyLogInfo').DataTable( {
                "searching": false,
                "bStateSave": false,
                "aoColumns": [
                    {
                        "data": "applicantKeyID",
                        "sClass" : "center"
                    },
                        //随后增加字段后修改
                    { "data": function(obj){
                        return obj.keyManagementProvince + obj.keyManagementCity+obj.keyManagementArea;
                    } },
                    {
                        "data": "taskID" ,
                    },
                    {
                        "data":"applicationType",
                        "render": function(data, type, full, meta) {

                            if(data=="普通")
                            {
                                return "<font color='green'>普通</font>";
                            }
                            else if(data=="紧急")
                            {
                                return "<font color='red'>紧急</font>";
                            }

                        }
                    },
                    { "data": "taskStartTime",
                        "render": function(data, type, full, meta) {
                            data = new Date(parseInt(data) * 1000).format('yyyy/MM/dd h:m:s');
                            return data;
                        }
                    },
                    { "data": "taskEndTime",
                        "render": function(data, type, full, meta) {
                            data = new Date(parseInt(data) * 1000).format('yyyy/MM/dd h:m:s');
                            return data;
                        }
                    },
                    { "data": "applicantName" },
                    {
                        "data":"applyDescription",
                    },
                    {
                        "data":"approvalPerson",
                    },{
                        "data":"approvalPhone",
                    },{
                        "data":"applicationStatus",
                        "render": function(data, type, full, meta) {

                            if(data=="approve")
                            {
                                return "<font color='green'>同意</font>";
                            }
                            else if(data=="reject")
                            {
                                return "<font color='red'>拒绝</font>";
                            }
                            else if(data=="pending")
                            {
                                return "<font color='red'>待批准</font>";
                            }

                        }
                    }
                ],
                language: {
                    "sProcessing": "处理中...",
                    "sLengthMenu": "显示 _MENU_ 项结果",
                    "sZeroRecords": "没有匹配结果",
                    "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                    "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
                    "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                    "sInfoPostFix": "",
                    "sSearch": "搜索:",
                    "sUrl": "",
                    "sEmptyTable": "表中数据为空",
                    "sLoadingRecords": "载入中...",
                    "sInfoThousands": ",",
                    "oPaginate": {
                        "sFirst": "首页",
                        "sPrevious": "上页",
                        "sNext": "下页",
                        "sLast": "末页"
                    },
                    "oAria": {
                        "sSortAscending": ": 以升序排列此列",
                        "sSortDescending": ": 以降序排列此列"
                    }
                },
            })
        } );

        /**
         * 按钮点击功能
         */
        $(document).ready(function(){

            /**
             * 导出xls功能
             */
            $(".button[id=exportxls]").click(function(){
                var qsData = collectQueryInfo();
//                console.log("导出excel的条件为："+qsData);
                //发起请求
                $.ajax({
                    async: false,
                    url: "https://www.smartlock.top/v0/downloadKeyLog",
                    type: "POST",
                    contentType: "application/x-www-form-urlencoded",
                    data: qsData,
                    timeout: 8000,
                    beforeSend: function ()
                    {

                    },
                    success: function (result) {

                        //将返回数据转化为json格式数据
                        var infoJson =JSON.parse(result);

                        //判断查询是否成功
                        if (infoJson.error){
                            var errInfo = infoJson.error;
                            alert(errInfo.msg);
                            reset();
                            if(errInfo.code=="00000"){
                                window.location.href="login.html";
                            }
                            return;
                        }else if (infoJson.success)
                        {
                            alert("后台已经生成数据，请进行下载！");
                            reset();
                            var sucInfo =  infoJson.success;
                            var downloadUrl = sucInfo.url;
                            window.open(downloadUrl);
                        }else {
                            alert("未知错误，请联系管理员！")
                        }


                    },
                    error: function (result) {


//                        console.log(result);
                        alert("无法连接到服务器！");
                    }
                });
            });
        });




















    </script>
    <script type="text/javascript">
        var userInfo=JSON.parse(localStorage.getItem("userInfo"));
        var regionInfo=JSON.parse(localStorage.getItem("regionInfo"));
        var permissions=JSON.parse(localStorage.getItem("permissions"));
        var accessToken=localStorage.getItem("accessToken");
        var tokenEndTime=localStorage.getItem("tokenEndTime");
        //检查是否有登录状态
        function  checkUserValidity(){
            if(userInfo==null||accessToken==null) //访问的信息不存在，则返回空
            {
                alert("你还没有登录!");
                window.location.href = "login.html";
            }
            else {

                if (new Date().getTime()> tokenEndTime * 1000 )
                {
                    alert("登录授权时间超出!");
                    window.location.href = "login.html";

                }
                else
                {
//						alert(tokenEndTime * 1000+" "+new Date().getTime()+"已经登录成功了！"+userInfo);
                    var userType=userInfo.userType;
                    switch(userType[2])
                    {
                        case "0": //超级管理员
                            break;

                        case "3":  //用户为工程师，用户不能登录前端页面
                            alert("工程师不能登录前端!");
                            window.location.href = "login.html";
                            break;

                        case "2": //审批员只显示作业管理
                            $("#jizhanguanli").css('display','none');
                            $("#dianziyaoshiguanli").css('display','none');
                            $("#yuangongguanli").css('display','none');
                            break;

                        case "1": //管理员分五种情况
                            switch(userType[0])
                            {
                                case "1": //铁塔公司的管理员可以管理所有公司的员工

                                    break;
                                case "2": //中国移动工不能查看铁塔公司管理界面、中国联通公司管理界面、中国电信公司管理界面
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面
                                    break;
                                case "3": //中国联通工不能查看铁塔公司管理界面、中国移动公司管理界面、中国电信公司管理界面
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面
                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面
                                    break;
                                case "4": //中国电信工不能查看铁塔公司管理界面、中国移动公司管理界面、中国联通公司管理界面
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面
                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国电信员工管理界面
                                    break;
                                case "5": //施工公司员工只能管理自己所属公司员工
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面

                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国联通员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面

                                    $("#dwgsyg").css('display','none');//隐藏代维公司员工管理界面
                                    $("#csyg").css('display','none');  //隐藏厂商员工管理界面
                                    $("#jizhanguanli").css('display','none'); //不能显示基站管理
                                    $("#dianziyaoshiguanli").css('display','none'); //不能显示电子钥匙管理
                                    break;
                                case "6": //代维公司员工只能管理自己所属公司员工
                                    $("#ttyg").css('display','none'); //隐藏铁塔员工管理界面

                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国联通员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面

                                    $("#sggsyg").css('display','none');  //隐藏施工公司员工管理界面
                                    $("#csyg").css('display','none'); //隐藏厂商公司员工管理界面
                                    $("#jizhanguanli").css('display','none'); //不能显示基站管理
                                    $("#dianziyaoshiguanli").css('display','none'); //不能显示电子钥匙管理
                                    break;
                                case "7": //厂商公司员工只能管理自己所属公司员工
                                    $("#ttyg").css('display','none'); //隐藏铁塔公司员工管理界面

                                    $("#ydyg").css('display','none'); //隐藏中国移动员工管理界面
                                    $("#ltyg").css('display','none'); //隐藏中国联通员工管理界面
                                    $("#dxyg").css('display','none'); //隐藏中国电信员工管理界面

                                    $("#sggsyg").css('display','none'); //隐藏施工公司员工管理界面
                                    $("#dwgsyg").css('display','none'); //隐藏代维公司员工管理界面
                                    $("#jizhanguanli").css('display','none'); //不能显示基站管理
                                    $("#dianziyaoshiguanli").css('display','none'); //不能显示电子钥匙管理
                                    break;
                            }







                            break;
                    }

						showUserInformation(); //侧边栏显示当前用户公司 管理区域 职位 用户名
                }
                //动态的显示登录人员名字
//                document.getElementById("username").innerHTML=userInfo.username;
                document.getElementById("username1").innerHTML="欢迎回来"+" "+userInfo.username;

            }
            //获取数据并加载
            //时间插件初始化
//           init();
            queryKeyLog();
        };
        /**
         * 点击重置按钮
         */
        function reset(){
            $("#keyID").val("");
            $("#managementCity").val("");
            $("#managementArea").val("");
            $("#startTime").val("");
            $("#endTime").val("");
        };
        //退出登录状态
        function  logout(){
            if(window.confirm("确定要退出登录状态？")){
                localStorage.clear();//清理登陆状态信息
                window.location.href="login.html";
            }
        };
        //获取基站日志
        function queryKeyLog(){
            var qsData = collectQueryInfo();
//            window.console.log(qsData);
            //发起请求
            $.ajax({
                async: false,
                url: "https://www.smartlock.top/v0/queryKeyLog",
                type: "POST",
                contentType: "application/x-www-form-urlencoded",
                data: qsData,
                timeout: 8000,
                beforeSend: function ()
                {



                },
                success: function (result) {

                    //将返回数据转化为json格式数据
                    var infoJson =JSON.parse(result);

                    //判断查询是否成功
                    if (infoJson.error){
                        var errInfo = infoJson.error;
                        alert(errInfo.msg);
                        reset();
                        $('#keyLogInfo').dataTable().fnClearTable();//清除表格内原有的数据
                        if(errInfo.code=="00000"){
                            window.location.href="login.html";
                        }
                    }else if (infoJson.success)
                    {
                        var sucInfo =  infoJson.success;
                        reset();
                        $('#keyLogInfo').dataTable().fnClearTable();//清除表格内原有的数据
                        $('#keyLogInfo').dataTable().fnAddData(sucInfo,true);
                    }else {
                        alert("未知错误，请联系管理员！")
                    }


                },
                error: function (result) {


//                    console.log(result);
                    alert("无法连接到服务器！");



                }
            });
        };














        function collectQueryInfo(){
            //获取固定参数
            var operatorName=userInfo.username;
            var qsData="operatorName="+operatorName+"&accessToken="+accessToken;
            //获取查询参数
            var qsDataActive = "";
            var keyID = $("#keyID").val();
            var managementCity = $("#managementCity").val();
            var managementArea = $("#managementArea").val();
            var startTime = $("#startTime").val()
            var endTime = $("#endTime").val();
            if(keyID!=""&&keyID!=null){
                qsDataActive = "&keyID="+keyID
            }
            if(managementCity!=""&&managementCity!=null){
                qsDataActive = qsDataActive+"&managementCity="+managementCity
            }
            if(managementArea!=""&&managementArea!=null){
                qsDataActive = qsDataActive+"&managementArea="+managementArea
            }
            if(startTime!=""&&startTime!=null){
                var startTimer = new Date(Date.parse(startTime.replace(/-/g, "/")));
                //截取10位字段传给后台
                var startTimestamp = startTimer.getTime().toString().substr(0,10);
//                console.log("开始时间戳为："+startTimestamp);
                qsDataActive = qsDataActive+"&startTime="+startTimestamp
            }
            if(endTime!=""&&endTime!=null){
                var endTimer = new Date(Date.parse(endTime.replace(/-/g, "/")));
                var endTimestamp = endTimer.getTime().toString().substr(0,10);
//                console.log("结束时间戳为："+endTimestamp);
                qsDataActive = qsDataActive+"&endTime="+endTimestamp
            }
            if (qsDataActive==""&&qsDataActive==null){
                return qsData
            }else{
                return qsData+qsDataActive;
            }
        };







        function showUserInformation() //侧边栏显示当前用户公司 管理区域 职位 用户名
        {
            var userType=userInfo.userType;

            switch(userType)
            {
                case "000":
                    document.getElementById("loginuser").innerHTML="<br>超级管理员<br>"+userInfo.username;
                    break;

                case "101":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司省级管理员<br>"+userInfo.username;
                    break;
                case "111":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司市级管理员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "121":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司区县管理员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;
                case "102":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司省级审批员<br>"+userInfo.username;
                    break;
                case "112":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司市级审批员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "122":
                    document.getElementById("loginuser").innerHTML="<br>铁塔公司区县审批员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;


                case "201":
                    document.getElementById("loginuser").innerHTML="<br>中国移动省级管理员<br>"+userInfo.username;
                    break;
                case "211":
                    document.getElementById("loginuser").innerHTML="<br>中国移动市级管理员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "221":
                    document.getElementById("loginuser").innerHTML="<br>中国移动区县管理员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;
                case "202":
                    document.getElementById("loginuser").innerHTML="<br>中国移动省级审批员<br>"+userInfo.username;
                    break;
                case "212":
                    document.getElementById("loginuser").innerHTML="<br>中国移动市级审批员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "222":
                    document.getElementById("loginuser").innerHTML="<br>中国移动区县审批员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;

                case "301":
                    document.getElementById("loginuser").innerHTML="<br>中国联通省级管理员<br>"+userInfo.username;
                    break;
                case "311":
                    document.getElementById("loginuser").innerHTML="<br>中国联通市级管理员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "321":
                    document.getElementById("loginuser").innerHTML="<br>中国联通区县管理员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;
                case "302":
                    document.getElementById("loginuser").innerHTML="<br>中国联通省级审批员<br>"+userInfo.username;
                    break;
                case "312":
                    document.getElementById("loginuser").innerHTML="<br>中国联通市级审批员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "322":
                    document.getElementById("loginuser").innerHTML="<br>中国联通区县审批员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;


                case "401":
                    document.getElementById("loginuser").innerHTML="<br>中国电信省级管理员<br>"+userInfo.username;
                    break;
                case "411":
                    document.getElementById("loginuser").innerHTML="<br>中国电信市级管理员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "421":
                    document.getElementById("loginuser").innerHTML="<br>中国电信区县管理员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;
                case "402":
                    document.getElementById("loginuser").innerHTML="<br>中国电信省级审批员<br>"+userInfo.username;
                    break;
                case "412":
                    document.getElementById("loginuser").innerHTML="<br>中国电信市级审批员<br>"+regionInfo.managementCity+" <br>"+userInfo.username;
                    break;
                case "422":
                    document.getElementById("loginuser").innerHTML="<br>中国电信区县审批员<br>"+regionInfo.managementCity+" "+regionInfo.managementArea+" <br>"+userInfo.username;
                    break;



                case "501":
                    document.getElementById("loginuser").innerHTML="<br>施工公司管理员<br>"+userInfo.username;
                    break;
                case "502":
                    document.getElementById("loginuser").innerHTML="<br>施工公司审批员<br>"+userInfo.username;
                    break;



                case "601":
                    document.getElementById("loginuser").innerHTML="<br>代维公司管理员<br>"+userInfo.username;
                    break;
                case "602":
                    document.getElementById("loginuser").innerHTML="<br>代维公司审批员<br>"+userInfo.username;
                    break;


                case "701":
                    document.getElementById("loginuser").innerHTML="<br>厂商管理员<br>"+userInfo.username;
                    break;
                case "702":
                    document.getElementById("loginuser").innerHTML="<br>厂商审批员<br>"+userInfo.username;
                    break;

            }

        }
    </script>
</head>

<body onload=checkUserValidity()>
<div id="body-wrapper"> <!-- Wrapper for the radial gradient background -->

    <div id="sidebar"><div id="sidebar-wrapper"> <!-- Sidebar with logo and menu -->



        <!-- Logo (221px wide) -->
        <a href="#"><img id="logo" src="../assets/images/logo.png" alt="Simpla Admin logo" /></a>

        <!-- Sidebar Profile links -->
        <div id="profile-links">
            你好, <a href="#" title="Edit your profile" id="loginuser" class="loginuser" > </a><br />
            <br />
            <a href="#" class="mode2" title="View the Site">修改资料</a> | <a href="#" title="Sign Out" onclick="logout()">退出</a>
        </div>

        <ul id="main-nav">  <!-- Accordion Menu -->




            <li>
                <a href="main.html" class="nav-top-item no-submenu"> <!-- Add the class "no-submenu" to menu items with no sub menu -->
                    首页
                </a>
            </li>



            <li id="gongsiguanli">
                <a href="#" class="nav-top-item"> <!-- Add the class "current" to current menu item -->
                    公司管理
                </a>
                <ul>
                    <li><a href="companyManage.html">公司查看</a></li> <!-- Add class "current" to sub menu items also -->
                </ul>
            </li>


            <li id="peizhiguanli">
                <a href="#" class="nav-top-item"> <!-- Add the class "current" to current menu item -->
                    配置管理
                </a>
                <ul>
                    <li><a href="configurationManage.html">配置管理</a></li> <!-- Add class "current" to sub menu items also -->
                </ul>
            </li>

            <li id="diquguanli">
                <a href="#" class="nav-top-item"> <!-- Add the class "current" to current menu item -->
                    地区管理
                </a>
                <ul>
                    <li><a href="zoneManage.html">地区管理</a></li> <!-- Add class "current" to sub menu items also -->
                </ul>
            </li>

            <li id="jizhanguanli">
                <a href="#" class="nav-top-item"> <!-- Add the class "current" to current menu item -->
                    基站管理
                </a>
                <ul>
                    <li><a  href="stationManage.html">基站列表</a></li> <!-- Add class "current" to sub menu items also -->
                    <li><a  href="stationManageLog.html">基站日志管理</a></li>
                    <li><a  href="stationUpload.html">基站日志管理</a></li>
                </ul>
            </li>


            <li>
                <a href="#" class="nav-top-item">
                    作业管理
                </a>
                <ul>
                    <li><a  href="taskManage.html">工单列表</a></li>
                    <li><a  href="abnormalTaskManage.html">异常工单</a></li>
                </ul>
            </li>


            <li id="dianziyaoshiguanli">
                <a href="#" class="nav-top-item current">
                    电子钥匙管理
                </a>
                <ul>
                    <li><a href="keyManage.html">钥匙列表</a></li>
                    <li><a class="current" href="keyManageLog.html">钥匙日志</a></li>
                    <li><a href="keyUpload.html">钥匙批量上传</a></li>
                </ul>
            </li>



            <li id="yuangongguanli">
                <a href="#" class="nav-top-item ">
                    员工管理
                </a>
                <ul>
                    <div id="ttyg"> <li><a href="tower_manager.html">铁塔公司员工管理</a></li> </div>
                    <div id="ydyg"> <li><a href="mobile_manager.html">中国移动员工管理</a></li> </div>
                    <div id="ltyg"> <li><a href="unicom_manager.html" >中国联通员工管理</a></li> </div>
                    <div id="dxyg"> <li><a href="telecom_manager.html" >中国电信员工管理</a></li> </div>
                    <div id="sggsyg"> <li><a href="construction_manager.html">施工公司员工管理</a></li> </div>
                    <div id="dwgsyg"> <li><a href="agent_manager.html">代维公司员工管理</a></li> </div>
                    <div id="csyg"> <li><a href="manufacturer_manager.html">厂商商员工管理</a></li> </div>
                </ul>
            </li>


            <li id="tongjiguanli">
                <a href="#" class="nav-top-item">
                    统计管理
                </a>
                <ul>
                    <li><a href="statistic.html">门锁统计</a></li>
                </ul>
            </li>

        </ul> <!-- End #main-nav -->

    </div></div> <!-- End #sidebar -->

    <div id="main-content"> <!-- Main Content Section with everything -->



        <!-- Page Head -->
        <h2 id="username1"> </h2>
        <p id="page-intro">What would you like to do?</p>
        <div class="clear"></div> <!-- End .clear -->

        <div class="content-box"><!-- Start Content Box -->

            <div class="content-box-header">

                <!--<h3>内容模块</h3>-->

                <ul class="content-box-tabs">
                    <li><a href="#keyLog" class="default-tab" >电子钥匙日志管理</a></li> <!-- href must be unique and match the id of target div -->
                </ul>

                <div class="clear"></div>

            </div> <!-- End .content-box-header -->
            <!--弹出修改资料框开始-->
            <div class="dialog">
                <div class="model-bg" title="editPersonInfo"></div>
                <div class="popBox" title="editPersonInfo">
                    <div class="ttBox">
                        <a class="clsBtn" title="editPersonInfo"></a>
                        <span class="tt">修改个人信息</span>
                    </div>
                    <div class="txtBox">
                        <div class="item">
                            <label for="editPerson_username">用户名：</label>
                            <input type="text" id="editPerson_username" disabled="true">
                        </div>
                        <div class="item">
                            <label for="editPerson_userType">用户类型：</label>
                            <input type="text" id="editPerson_userType" disabled="true">
                        </div>
                        <div class="item">
                            <label for="editPerson_company">用户所属公司：</label>
                            <input type="text" id="editPerson_company" disabled="true">
                        </div>
                        <div class="item">
                            <label for="editPerson_phone">手机号码：</label>
                            <input type="text" id="editPerson_phone" disabled="true">
                        </div>
                        <div class="item">
                            <label for="editPerson_originalPassword">原始密码：</label>
                            <input type="password" id="editPerson_originalPassword">
                        </div>
                        <div class="item">
                            <label for="editPerson_newPassword1">新密码：</label>
                            <input type="password" id="editPerson_newPassword1">
                        </div>
                        <div class="item">
                            <label for="editPerson_newPassword2">确认新密码：</label>
                            <input type="password" id="editPerson_newPassword2">
                        </div>
                    </div>
                    <div class="btnArea">
                        <div class="btnGroup">
                            <a class="sgBtn ok" id="submit_editPerson">确定</a>
                            <a class="sgBtn cancel" id="cancel_editPerson">取消</a>
                        </div>
                    </div>
                </div>
            </div>
            <!--弹出修改资料框结束-->
            <div class="content-box-content">
                <div class="tab-content default-tab" id="keyLog"> 	<!-- This is the target div. id must match the href of this div's tab -->
                    <div class="queryCondition" id="queryKeyLog">
                        <div class="screen-top">
                            <span>电子钥匙编号<input id="keyID" type="text"/></span>
                            <span>所属市级区域<input id="managementCity" type="text"/></span>
                            <span>所属区级区域<input id="managementArea" type="text"/></span>
                            <!--<span>-->
                                    <!--所属地区：-->
                                    <!--<select id="province_select"></select>-->
                                    <!--<select id="city_select"></select>-->
                                    <!--<select id="county_select"></select>-->
                            <!--</span>-->
                        </div>
                        <div class="screen-top">
                            <span>起始时间<input id="startTime"  placeholder="请输入开始日期" class="laydate-icon" onClick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})" type="text"/></span>
                            <span>结束时间<input id="endTime"    placeholder="请输入结束日期" class="laydate-icon" onClick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})" type="text"  /></span>
                            <input class="button" id="query" type="submit" value="查询" onclick="queryKeyLog()" />
                            <input class="button" id="reset" type="reset" value="重置" onclick="reset()" />
                            <input class="button" id="exportxls" type="button" value="导出xls" />

                        </div>
                    </div>
                    <div>
                        <table class="display" id="keyLogInfo" cellspacing="0" width="100%">
                            <thead>
                            <tr>
                                <th>钥匙编号</th>
                                <th>钥匙所属片区</th>
                                <th>工单编号</th>
                                <th>工单类型</th>
                                <th>工单开始时间</th>
                                <th>工单结束时间</th>
                                <th>工单申请人</th>
                                <th>工单描述</th>
                                <th>工单审批人</th>
                                <th>工单审批人电话</th>
                                <th>工单状态</th>
                            </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div> <!-- End #keyList -->
            </div> <!-- End .content-box-content -->

        </div> <!-- End .content-box -->

        <div id="footer">
            <small> <!-- Remove this notice or replace it with whatever you want -->
                &#169; Copyright 2016 四川九鼎数码科技有限公司 | Powered by UESTC CSIS</a> | <a href="#top">Top</a>
            </small>
        </div><!-- End #footer -->

    </div> <!-- End #main-content -->

</div>
</body>

</html>
